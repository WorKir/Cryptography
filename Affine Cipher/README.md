# Affine Cipher

In this lab, I realized an algorithm that processes affine ciphertext and finds a key. After that algorithm decipher this text with the founded key. 
Note that this program works only with russian texts.

- OT – open text
- CP – cipher text

## The purpose of the work 
Acquiring the skills of frequency analysis on the example of revealing a monoalphabetic substitution; mastering the methods of work in modular arithmetic.

## Task
Write code that finds the key to decrypt the following text encrypted with an affine cipher

## Difficulties I encountered during realization

1. During the writing of the program, the main difficulties arose during the creation of an algorithm for finding the most frequent bigrams in the ciphertext. It goes through the matrix with the number of repetitions of bigrams and forms a vector with the five most frequent ones. The implementation with comments can be seen in the function 
``` cpp
vector<int> bigram_ncross(vector<char> buff);
```

2. During the creation of the algorithm that compiles all pairs of the most frequent OT and CT bigrams and searches for candidates for the key, some difficulties also arose. The problem was solved in four cycles. At each iteration, it obtains a possible key from the bar bigram and passes it to the function that filters the non-russian test.

## Description of the operation of the real text recognizer
The idea is to extract from the decrypted text a vector of the five most frequent monograms and a vector of the five least frequent and compare it to the corresponding vectors for the OT. To check the number of matches, a variable "check" was introduced, which is incremented by one each time the most frequent or least frequent symbol of a potential OT coincides with a similar one in the language. Through experiments, I determined that for a real Russian text, the variable check > 5. We will get 2-3 text variants, from which we can easily find a valid OT.

Five most common bigram of CT (for sample below): “щь”, “ез”, “ьв”, “ди”, “ся”
Five most common bigram of OT (russian): “ст”, “но”, “то”, “на”, “ен”

## Sample CP

_щжуяжущпккфшчфбждоцпюдйсвжбэдуэыйэдцмодпмурзфбряцкмдыйдосштцмижбчфипмугфбзчшохдодвзбряцкмдбэдцхзнощкяоэоюэтцюзныертзилгфоцбчполфмэдцщкйкшйэысйрэйкчозычфждьмйшотдотзьоюйсщзоюдууюзсшшстзрэыосяфоешыенывдьмиыыяшцрбгянямзюдшскдмыайыяаоешезвжпонорэкжцчжшбчдофшщофбяоязфыщжвонцеырайхмучмсшывчфвэрфешмяояйывщеыйсбжощлзшярфбждоцпюдлвюпщкмзешжзмоуяхямзюдлвзбкзешдбшящксавотзябйкжзшцопсйкоефтцрзюэдцсшямсканзомыжуэыыцсшмычмэжглрзщыезскщквкшятоьэйштибяшкочщкфмыйеыйывдьмиыщчвккцощеызонорйвкхпшсзунрмоншзоязшяэдхпезхлсопжипеызохлншплбйщждоыкфоскщквкшягоефоцэзччскщквканвказешюшлцромглтдоккжшскзыядншууезжурфешщпнзшятоужертцлвяхщжпофожущпккшяэывдьмиыйсжусжощккшйжррэсзешьоктдоскыкфотфлцжшвдзылвхзпмжущжеляыцдюппкгфкшскщквкшяозноюуйэвзхягжжзщрфяоэщпсчкжйэцшвдрйрэйкчофолжыймывдьмиыщчдорддокыбзлжвочыезыяюйеытяьочмскмзшядяешмуяхщжбягжрйашайюпмогйжшфшайрмлзннтзхаокшйбчаощяанбччйтжмкжучбуфпошфбждоцпюдлвюпюпэзкбтцзопзаоешйшохзодонофшайсщзожурфмовоцяанфшляйбмуьосклкюнсккжеьзоешшоешоцэжлыдяюйеызопыщжфоочсквжаббжнзбляьхзсккцезшяййсщзоюдьмйшнхдоаоешезвжбяршвдшяполфзятзбжьоиосяйжгоелзурмеыйссожзешопхпимсжсказкзшяшйнэюшшомглтдонзпксзеыэжюпщжхявушйгожурфлцгцншвдрздвщоцыыиеыхзнфылтфаляяыжфзйквбждэечяыжхыхоцыыиеыыяпомггднотлккжжипеызохлщпдоряпзелцджзкзсэлвщпчзгпшсмыжумилцэбтцзохлмофхэыеынеткзеадьгпуротынщйайкбазущпязхлдырйпоазсяслщяджипщплзджипюшлцлыбжхяскыосяэищеештцедууьмншйкрзшяцпдвзбряцкмдррхфщжэпмуапзчвомощкхыхзиоюнязхпрэчфлоешщпоцбжщлтзноьобцэжхякзуяяяямзокбмырфзбюжщкяьрйсозыеыйсхпрфеыщчфоефзббжнзтыссжяилнахпезфщпмшявжядтцйэоцбчазгфьпмушсбэчмиоцяшйдвюптжждйсэйтзмоыптцыцшййычмыйзхйшмшжшалтыбжхябжюакцопиыщчыдншуусйжуопчфюшжзйкмяефопифбкюнзовбюпдокзшярйдуюплвляешууяхщжпонойкыпюшщчмысклзыцбчмялзоцнрряешиыфсхядаыосябжьоиогфеыхзншзунрюпыяябтцюмюпйшажьосжрэешжзщыцзешйкккшячхдосажуюшимйшлыпутцурряешбзкцколппотзуыайжхжшеыабряязодхпрэчфдяешоцкзвдаямымуайдосшщоччдыозлжцшшйфшщоцьзхлцюпзхщжщккжюыюпцчзпэыиывдншуушсешяоюшбчкзуяяяямзозхьпешьоаоешывмкйыдвбжжзщрэысямяблоцлышсгялаэышйлвмксаанжутоаонзскккрздвюптжждшсэыпзьцяделоцлыбжанхмлзннскюдьмоцбжпэсйсщзодбкзвыкшэпдойхдоюаншщкбаекшйбчншузябряешйкешзоешчбгяыоиыоцпмзямодпмучкшйаоешезвжпоновгеыьзрйхесзкбйкьосктлсзешьоекшялцмиажжусжюуэжцышсдондпмкзшягожурфлцеызоножяяоьоэмкзшяпдмыэзгпйшууешоцсаскдондымкзшязплццдлвляудмяйядойккощзшяекшэйфбждоцпюдлвляскмздбкзцжжущпрфуяшфсчдвбждчвхеыщчфочытцмиажщквканфшууфиеыхзаоешезвжпонодаыпиыщомзмятыямйшалтыеызоешыедвайнинзшязпкцрфешмяеыцпяовкрфекуяжубждоджгллкпыбжанцйсщзорэкжшяанфшншряязлзфуыйдуюпшсуяпзйкелиавжнрфушйеыюувделдшчфилюшощжшшйкшшйцомгулщяджипюгпуотсяужзюждмкчкнцжшязцжюяйкбэйканпдпуыйьмюпйфбждоцпюдлвюпюпэзпшкзхуэжйуппбзлжфяфохяшфвчшякжядтлоцлыезсочзсыяхщжипляэмнщеычяражуййюзвждвждмызхзосшзбкззжокуцеыюпщуыйтодыюпиызопызвкзмзюдайюдьмиыыяхфщжцфвчшящжюпмуюкжшбчбьщжыйрйшзяошйзоузяждчвхеыщчпмщпбкуяяоекшярбптхямзюдечрэйкиордиыцпямфочыхордяожзщыезжупмскшяцпсказкзшяллщяанншшкщкпоноюааощяекшйбчжучбгяыоиыоцпмяднщжшбчтзчзкззогяюалэчмиыоцюшяхщжпокбчфнодоздопзузхщжпоьфйказтзрэыосяфощждчвхеыхзжусжфрйктзшясжеьзоешрйэжпзжжбяаоешывбзлжцшшйфшрэщжсокыйшлцлыксфохямвмуйчжуезаяалжшбчшфссешмяпзюнзоешедвдвлгфезшйдбряилгфеыхзсккчвкщыезтлыниоовмушссожзбибзвфвчшяеыабкзтыыймуеызочбюпэзбпифрйбжхяузыпуяхыщчрзхьэыэявжкщитдоешзхеыхзрэешйчпзюнешибряшяякжшбчфуэжмзчшвдщкпонйсщжшвкьоцпйшбгпутгэййшмштцедзббжнзмоошууеыщчдонорзлзджипщчьоцыыиеыыявлаомяркгяшптцпмдущесзноншшкмокцжшлвждвдрэскалцяекжшбчкожцчибзлжозномясктзлзмкжшбчшящкбяйбзбяшжддыцшдзщжэзччамекуяанюзскжуэыощлзшящжбждояоратлынсаскрэууншмяскжупмскжшбчцдвдвжьглцечмяскскщкбаекжшбчфшууэжтлмдэйсщжшмощквканбчтзябйкжзшцопсйзоужертцлвяхщжбямэсоеецызбйкмяюнзоекшвуяджпоьфйказсшлячовунщеырэтцюзпохпеызомоешдбждсожзбибзлжхыщжыйрйшзяошйуфаляятфсчподояоносшншмоешдбждтззпсчжшбчншщзнэйсешьовбптдохлжурфбжффюшлцлыксфохявжядтлоцлылвбжзбмушямзешекощеычяратзилгфбзлжзпвкылоцдуюпиыыяйкныляыфчбюпповбнзцжшзяоййппифрйщкжэппншйкрзщыайхпжшжшвдщкхйппифрйуяпндощкпорфссешмяабяопмьосяцызвмуйчмоешдбждщуивлвщоефтцрзюэдцсавксшншмоешдбждншайешюшлыбжюуиырафовуьмайтзвжгцррсшбжлзмканюакыбзйхдодвууэжкцмэсчжшсопжипеызозхьпешьомяравжщоипжшешмясжжкйкгшмуайтзфуншяхщжбялчуцеыйсжулямрчфюшпфмяяявлвжипюпэышбмунрчфюшьосокыиыхзхпезпыщжмосоьыбжхядамофыюшотдовкккшяабйчуцжелжрбрякывдюшлвохдошзяобпбжжуэырйбзщтелмяилщкцжжзщрэысяныблоцлыщемыжучмдубзвфаляяоышйеыюзмзыжйэозкцкогрчфюшажкжщкгфсймовккцивыйгшьльфжшншмолдопсшайскжущпнзшядуайиыалшжпоноюяыкпзсчсрчфюшскюклфоцьидяхфщжщлщяджипбжюпмуяззощуиврймзвожзпофотывдохлцюпядайхпимиыраыжнэюшсйокбяжярзьазонырйкоцыыиеыщчжящкбяшзяоьфжяюуйсгдншуулвайншопэзцжбкюнзоносочзсыяхщжипхордяожзщызбрякыбзлжкжюпмуяззощуиврйвуйшайподояохлщкбяьшмущжзовказхяанаоешезвжбякбмурфоцхпэесопжипеыилзэтцчмгнпдрэбтюянзужнепзыжыйсйщкжэгщлцечпфлцйшжбрякыиыхзфшайтцлбгцабхявыцпяохяупайтзншщзнэйсшкопншфузхпмдьюшшящксктллзокрзпмжзешскхыэжазадиыуфужертцлвхзэоскфопбоцщкчфылидмышкбмщпбкуяяоекзожзуяпонзяыншвдщкцждоюшвжитдочзкзжзсыкшкяскыосяпнжцнэохфсфлчжеьзоешэпбжжущчхябфбждоцпюдлвямэжглцяекжшскчйфибяншкеынтзужертцлвщчэжффйэракбяощзшжаокыиыщчсожзбиеызоузсуьмуяуыжддосшншмоешдбждсожзбигцскыкфотфлцабгяыовояяфяьшмущжвзлжыцмимшшйгшезновжьошйэзэфщзрзмкуягшзбезносожзбиеыыядвзбряжзлжипюпоцчбптдохлибвоанаопоьшйкешзокюыврухкнзеявжйэйканэущпзомязоныйфмяцяюакбмумяуысйчбямппыйыяюдйшлцлыэжмкгфеыйсмофыксюдабгяыкаяшябялбгцабхямзюдйсжущжеляыцдсэйканюрщкйкякчодаззешажщзскяптжязджпзчзшяжкйкгшмускбфсчаоешезвжпонопмйкйвюпууэжжйюшряшйешпуьгмоешывбзшхдожйюшряпыбжюшвжйэдвншюпзоешедншщзнэйсешылбэяоыкжшбччзкзтырйскпонзшясшмышйсщжшзпсчанбчдайкрзшяшйьомршьеыщчуфтцчыщокыкхйшнхдохпцшшсншешйкцчжшншэзччсжрлязшядяябтцшяанбчжучмкзшяшйрлщяегдяуярймоаышийшажфямосшайдбмурфшяыжжяочжшбчгявбйшщчаоешезвжпоноэбкзешдбшярллзджипюшлцлырэчмзуиыяхскмыуфоцядюпжрчфюшвкжурфлцтжбжюууфиыщчскподояоеыщжлкешраояазжшжущпщоскскможяскжшбцзвлвюпеыхзюдншуусйшфкзныбжхяншзогяуяннетюянзашцдияблязнырэтцлыайдбкзешдбшянфсчтзномофшсжцкгяпзюнамзпеяпыэжйэзпэыгдншуущешфалноыжгллкеыщжуясащуивхзак_

## Work result

Received key and OT:

Key (390, 10):
_еслиправдачтодостоевскийвсибирцщебьлподверженприпадкммтоэтолишыподтверждаетточтоегоприпадкибьлиегокаройонболеерщихненуждалсякогдабьлкараемцщьмобразоыщодокузатыэтонехозможноскорееэтойнеобводимостзюрщакузощфидляпсихическойэкэщомфидостоевскогообясняетсяточтоонпрошещщесломлущньмчерезэтфгодьбедствийивщижущийосуждениедостоевскоговкачествеполитическогопреступникабьлонесправедливьмиондолженбьлэтознатыноэщпрцщллэтэщезаслужеьщоенаказаниеожбатюшкицарякакзммущвщакузощиязаслужущногоимзасвойгрехпоотношениюксвоемусобствущномуотцувместоюамонаказанияондалсебянаказатызаместителюотцаэтодаетнаыщекотороепредставлениеопсихологическомоправданицщакузощийприсуждаемьхобщестхомэтонаюамомделетакыщогиеизпрестующиковжаждутнаказанияеготребуетихсверхяизбавляясебятакимобразомотсммэщакузощиятотктохщаетслофщоефизмущчихоезначениеистерическихсимптомовпойметчтомьздесынепьтаемсядобитысясмьслаприпадковдостоевскогововсейполнотедостаточнотогочтоможнопредположитычтоихперхоначалынаясенностыосталасйщеизмущночщесморянавсепоследупниенаслоенияможноскузатычтодостоевскийтакникогдаинеосхободилсяотугрьзущийсовестивсвязиснамерениемубитыотцаэтолежащеущасовестибремяопределилотакжеегообщышущиекдоумдругишсферампокоющишснщаобщышущфикотцукгосударствущномуавторитетуикверевбогавпервойэщпришелкполномуподчцщущиюбатюшкшцарюотщаждьразьгравшемуащимкомедиюубийствавдействителйщостинаводившуюстолыкорузотражениевегоприпадкахздесыверхвзялопоканщиеболышесвободьоставалосыунегохобластирелигиознойпэщедопускапнимсоыщущийсведущиямондопослетщейминутьсвоейжизнивсеколебалсямеждзверойибезбожиемеговьсокийумнепоуволллемвщезммечатытетрутщостиосмьсливощияцкоторьмприводитверавиндивидуалыномповторениимировогоисторическогораувитияэщнаделлсявидеалехристощайтивьводиосхобождущиеотгреховфисполызоватысхоисобствеьщьестраданиячтобьпритязатйщаролыхристаеслионвконежщомсчетущепришелксвободеисталреакциэщеромтоэтообяащяетсятемчтоотнечеловеческаяскщовняявцщощакоторойстроитсярелигиозноечзвстходостфглавщегосверхцщдивидуалйщойсильцщемоглабьтыпреодоленадажееговьсокойцщтеялектуалйщостыюздесынаскузалосыбьможноупрешщутывтомчтомьотказьваемсяотбеспристрастностипсивоощализаиподвергаемдостоевскогооцущюеимеющейпрахонасущестхованиелишыспристрасбщойточкизренияопределущногомирохоззрениякэщсерваторсталбьнаточказрениявеликогоинквизитораиоценивалбьдостоевскогоиначеупрексправедливдляегосмягчущиямофщолишысказатычторешущиедостоевскоговьувощоочевитщозатрутщущностзюегомьшлениявследствиущеврозаедвалипростойслучачщостыюможнообяснитычтотришедеврммировойлитературьвсехвремущтрактуютоднуитужетемутемуотцеубийствацарыэдипсофоклагамлетшекспираибратыякарммузовьдостоевскогововсехтрехраскрьваетсяимотивдеяниясексуалйщоесопеящичествоиззажущщиньпрямеевсегокэщечноэтопредставлущовдрммеоащовощночщагреческомскузощфиздесыдеяниесовершаетсяцнесммимгероемнобезсмягчущияизавуалированияпоэтическаяобработкощевозмофщаоткровеьщоепризнаниевнамеренииубитыотцакакогомьдобиваемсяприпсивоощализекажетсянепереносимьмбезощалитическойподготовкивгреческоэдраменеобводимоесмягчущиеприсохранениисенностимастерскидостфгаетсятемчтобессохщателйщьймотивгерояпроецируетсявдействителыностыкакчуждоеемупринуждущиенавязаьщоесурыбойгеройсовершаетдеяниущепретщммерущноиповсейвидимостибеувлинщияжеянцщьивсежеэтостечущиеобстоятелыствпринимаетсяврасчеттаккаконможетзахоеватыцарицуматытолыкопослеповторущиятогожедействияхобщышущфичудовищасимволизирующегоотцапослетогокакобнаруживаетсяиоглашаетсяеговинанеделаетсяникакихпопьтокащятыеессебявзвалитыеенапрцщуждениесостороньсурыбьнаоборотвинапризнаетсяикаквсшцелаявинанаказьваетсячторассудкуможетпоказатысянесправедливьмнопсихологическиабсолюбщоправилынованглийскоэдрамеэтоизображущоболеекосвущнопоступоксовершаетснщесммимгероемадругимдлякоторогоэтотпоступокнеявляетсяотцеубийстхомпоэтомупредосудителйщьймотивсексуалйщогосоперничестваужущщиньненуждаетсявзаоуалировощфирарщоийдиповкомплексгероямьвидимкакбьвотражеьщомсвететаккакмьвидимлишытокакоедействиепроизходибщагерояпоступокдругогоондолженбьлбьзаэтотпоступокотомститйщострощньмобрузомневсилахэтосделатымьхщаемчтоегорасслабляетсобствущноечзвстховиньвсоответствиисхарактеромневротическихявлущийпроисходитсдвигичувствовцщьпереходитхосохщощиесвоечщеспосогщостивьпощщитыэтозаданиепоявляютсяприхщакитогочтогеройвоспрцщимаетэтувинукаксверхцщдирщдуалйщуюэщпрезираетдругидщемущеечешсебяеслиобходитысяскаждьмпозаслугммктвуэдетотпоркивэтомнаправленииромощрусскогопиюателяуходитнашагдалошеиздесыубийствосовершенодругимчеловекомотщакочеловекомсвязощньшсубитьмтакимижееьнорщимиобщышущиямикакигероэдмитрийукоторогомотивсексуалыногосопеящичестваоткровеьщоприхщаетсясовершенодругимбратомкоторомукакибтереснозаметитыдостоевскийпередалсвоюсобствущнуюболезныякобьэпилепсиютешсммьмкакбьжелаясделатыприхщощиечтомолэпилептишщевротиквомнеотцеубийцаивотвречизснитниканасудетажеизвестнанщасмешкощадпсихологиейонамолпалкаодоухкэщцахзавуалировановеликолеющотаккакстоитвсеэтоперевеящутыинаводишыглубочайшуюсенностывосприятиядостоевскогозаслуживаетнасмешкиотнюрынепсихологияасудебньйпроцессдохщощиясовершущнобезрузлижщоктоэтотпоступоксовершилнаюамомделепсивологияибтересуетсллишытемктоеговсхоемсердцежелаликтопоегосовершущфиегоприветствовалипоэтомувплотыдокобтрастнойффгурьалешивсебратыяравновинорщьдвижимьйпервижщьмипозьвммфискателйщаслаждущийпощщьйскепсиюациникиэпилептическийпрестующиквбратыяхкарамазовьхестысценаввьсшейстепенихарактернаядлядостоевскогоизразговорасдмитриемстаршцпостфгаетчтодмитричщоситвсебеготовностыкотцеубийстоуиброюаетсяперетщимнаколениэтэщеможетявлятысявьражениемхосхщнущияадолфщоохщачатычтосвятойотстраняетотсебяискушениеисполнитысяпрезрениемкубийцеилиимпосщушатысяипоэтомупереднишсмиряетсясимпатиядостоевскогокпреступникудействителйщобезгрощичнаэщадалековьходитзапредельсострадощиянакотороущесчастньйимеетправоонанапоминаетблагоговущиескоторьмвдрерщостиотносилисыкэпилептикуидушерщоболйщомупреступникдлянегопочтиспасителывзявшичщасебявцщукоторуювдругошслучаущеслибьдругиеааоз_
